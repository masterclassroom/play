<!DOCTYPE html>
<html lang="en">
<head>
  <h2>Koorsooyin Tayo Leh</h2>
<input type="text" id="course-search" placeholder="Raadi koorso..." style="padding: 10px; margin-bottom: 20px; width: 100%; font-size: 16px;">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard</title>
  <link rel="icon" type="image/png" href="logo.png">
  <link rel="stylesheet" href="akiidar.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
  <audio src="ero.mp3" id="ero"></audio>
  <audio src="click.mp3" id="click"></audio>
  <audio src="shit.mp3" id="shit"></audio>
  <audio src="suc.mp3" id="suc"></audio>
  <audio src="back.mp3" id="back"></audio>
  
  <header>
    <h1>Master class room</h1>
       <div class="menu-container">
        <button class="menu-button" onclick="toggleMenu()">☰</button>
        <div class="menu" id="menu">
            <a href="Profile.html">Profile</a>
            <a href="purchased.html">Purchased courses</a>
            <a href="message.html">messages</a>
            <a href="Draw.html">Buy coins</a>
            <a href="backup.html">Backup coins</a>
            <a href="Coins.html">Daily rewards</a>
            <a href="deletion.html">Account deletion</a>
          <a href="notification.html">Notification <span id="notification-badge" style="display: none; color: red; font-size: 20px;">•</span></a>
            <nav>
      <ul>
       <li><button id="logout-btn" class="btn-logout">Log Out</button></li>
      </ul>
    </nav>
        </div>
    </div>
    <nav>
      <ul>
        <li><p>User coins: <span id="user-coins">Loading..</span></p></li>
        <li><a href="Question.html" class="green-link">FAQ</a></li> 
        <li><a href="Injury.html" class="green-link">Inquiry</a></li>
        <li><a href="https://wa.me/252672146979" target="_blank" class="green-link">Contact</a></li>
         <li><a href="#" id="about-btn" class="green-link">About</a></li>        
        </ul>
    </nav>
  </header>

  <section class="courses">
    <h2>Koorsooyin Tayo Leh</h2>
    <p id="no-results" style="display: none; color: red; font-size: 18px; font-weight: bold; text-align: center; margin-top: 20px;">
  No course found
</p>

    <!-- Course 1 -->
    <div class="course-card" id="course1">
      <h3>Koorsada:Siraha Muqaal Samaynta</h3>
      <!-- Unlock Buttons for Course 1 -->
      <button class="btn-unlock100" data-course="Siraha Muqaal Samaynta" qiime="70">70</button>
      <button class="btn-unlock900" data-course="Siraha Muqaal Samaynta" qiime="1000">1000</button>
       <button class="course-data" data-course="Siraha Muqaal Samaynta"
        data-teacher="Maxamed"
        data-type="Video"
        data-time="1 hours and 17 minutes"
         data-image="Siraha Muqaal Samaynta.png"
        data-price="1000">☰</button>
      
    </div>

    <!-- Course 2 -->
    <div class="course-card" id="course2">
      <h3>Koorsada:Soo Dajinta Pes 25 Mobile Kasta</h3>
      <!-- Unlock Buttons for Course 2 -->
      <button class="btn-unlock100" data-course="Soo Dajinta Pes 25 Mobile Kasta" qiime="30">30</button>
      <button class="btn-unlock900" data-course="Soo Dajinta Pes 25 Mobile Kasta" qiime="200">200</button>
       <button class="course-data" data-course="Soo Dajinta Pes 25 Mobile Kasta"
        data-teacher="Maxamed"
        data-type="text"
        data-time="No time"
         data-image="Soo Dajinta Pes 25 Mobile Kasta.png"
        data-price="200">☰</button>
       
      
    </div>

    <!-- Course 3 -->
    <div class="course-card" id="course3">
      <h3>Koorsada:Sirta Efootball 25</h3>
      <!-- Unlock Buttons for Course 3 -->
      <button class="btn-unlock100" data-course="Sirta Efootball 25" qiime="50">50</button>
      <button class="btn-unlock900" data-course="Sirta Efootball 25" qiime="500">500</button>
      <button class="course-data" data-course="Sirta Efootball 25"
        data-teacher="Maxamed"
        data-type="text"
        data-time="No time"
        data-image="Sirta Efootball 25.png"
        data-price="500">☰</button>
    </div>
  </section>

  <footer>
    <p>&copy;2023-2025 Master class room All rights resevered</p>
  </footer>

  <script type="module" src="akiidar.js"></script>
    <script type="module" src="internet.js"></script>
</body>
  </html>

<script>
var click = document.getElementById("click");
var shit = document.getElementById("shit");
  function toggleMenu() {
    shit.currentTime = 0;
    shit.play();
  const menu = document.getElementById("menu");
  const button = document.querySelector(".menu-button");
  const isVisible = menu.classList.contains("show");

  if (isVisible) {
    menu.classList.remove("show");
    button.innerHTML = "☰"; // dib ugu celi 3-da xariiq
  } else {
    menu.classList.add("show");
    button.innerHTML = "×"; // badal calaamada marka menu furmo
  }
}
document.addEventListener("click", function (event) {
  
  const menu = document.getElementById("menu");
  const button = document.querySelector(".menu-button");

  if (!menu.contains(event.target) && !button.contains(event.target)) {
    menu.classList.remove("show");
    button.innerHTML = "☰"; // marka meel banaan la taabto, ku celi 3-da xariiq
  }
});
document.querySelectorAll(".course-data").forEach(button => {
  button.addEventListener("click", () => {
    click.currentTime = 0;
    click.play();
    const name = button.dataset.course;
    const teacher = button.dataset.teacher;
    const type = button.dataset.type;
    const time = button.dataset.time;
    const price = button.dataset.price;
    const image = button.dataset.image; // Haddii courseImage la waayo
    setTimeout(() => {

    const query = `details.html?course=${encodeURIComponent(name)}&teacher=${encodeURIComponent(teacher)}&type=${encodeURIComponent(type)}&time=${encodeURIComponent(time)}&price=${encodeURIComponent(price)}&courseImage=${encodeURIComponent(image)}`;
    window.location.href = query;
    },1200);
  });
});
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js";
  import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/11.1.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBAj0xbIZhcmWiSf3nYVgIIgTZ_KJ64mTE",
    authDomain: "exam-81b90.firebaseapp.com",
    databaseURL: "https://exam-81b90-default-rtdb.firebaseio.com",
    projectId: "exam-81b90",
    storageBucket: "exam-81b90.appspot.com",
    messagingSenderId: "461178422237",
    appId: "1:461178422237:web:8433ab42b524b0a17bac34",
    measurementId: "G-KKDNZBZLPG"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth();
  const db = getDatabase();

  const badge = document.getElementById("notification-badge");

  onAuthStateChanged(auth, (user) => {
    if (!user) return;

    const userMessageRef = ref(db, `users/${user.uid}/message`);

    onValue(userMessageRef, (snapshot) => {
      const message = snapshot.val();

      if (message) {
        badge.style.display = "inline"; // Calaamada casan muuji
      } else {
        badge.style.display = "none"; // Ha muujinin
      }
    });
  });
</script>
<script>
document.querySelectorAll(".course-card").forEach(card => {
  const courseButton = card.querySelector(".course-data");
  if (courseButton) {
    const image = courseButton.dataset.image;
    if (image) {
      card.style.background = `url('${image}') center/cover no-repeat`;
      card.style.color = "white"; // Optional: qoraalka cad ka dhig hadii loo baahdo
      card.style.borderRadius = "12px"; // Optional: geesaha u wareeji
      card.style.boxShadow = "0 8px 20px rgba(0,0,0,0.2)"; // Optional: qurxinta
      card.style.padding = "20px"; // Optional: in content gudaha u jiro
    }
  }
});
</script>
<script>
document.querySelectorAll("a").forEach(link => {
  const originalHref = link.getAttribute("href");

  // Ignore if href is just "#" or already has onclick
  if (!originalHref || originalHref === "#" || link.hasAttribute("onclick")) return;

  link.addEventListener("click", function (e) {
    e.preventDefault(); // Jooji navigation-ka degdega ah
    click.currentTime = 0;
    click.play();
    setTimeout(() => {
      window.location.href = originalHref;
    }, 1200);
  });
});
            </script>

<style>
  #course-search {
    padding: 12px 16px;
    width: 100%;
    font-size: 16px;
    border: 2px solid #00c853;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
  }

  #course-search:focus {
    outline: none;
    border-color: #ffd600;
    box-shadow: 0 0 8px #ffd600;
  }

  ::placeholder {
    color: #aaa;
    font-style: italic;
  }
</style>
<script>
  const searchInput = document.getElementById("course-search");

  // Hel query string value 'search'
  const urlParams = new URLSearchParams(window.location.search);
  const searchParam = urlParams.get('search')?.toLowerCase().trim();

  function filterCourses(searchValue) {
    document.querySelectorAll(".course-card").forEach(card => {
      const heading = card.querySelector("h3");
      const originalText = heading.getAttribute("data-original") || heading.textContent;
      heading.setAttribute("data-original", originalText); // Kaydi asalka
      
      const lowerOriginal = originalText.toLowerCase();

      if (searchValue && lowerOriginal.includes(searchValue)) {
        // Highlight
        const startIndex = lowerOriginal.indexOf(searchValue);
        const endIndex = startIndex + searchValue.length;
        const beforeMatch = originalText.slice(0, startIndex);
        const matchText = originalText.slice(startIndex, endIndex);
        const afterMatch = originalText.slice(endIndex);

        heading.innerHTML = `${beforeMatch}<span style="color: red;">${matchText}</span>${afterMatch}`;
        card.style.display = "block";
        card.style.border = "2px solid gold";
        card.style.transform = "scale(1.02)";
        card.style.transition = "0.3s";
      } else if (searchValue) {
        card.style.display = "none";
      } else {
        heading.innerHTML = originalText;
        card.style.display = "block";
        card.style.border = "";
        card.style.transform = "";
      }
    });

    // No result
    const visible = [...document.querySelectorAll(".course-card")].some(card => card.style.display !== "none");
    let noResult = document.getElementById("no-course");
    if (!visible) {
      if (!noResult) {
        noResult = document.createElement("p");
        noResult.id = "no-course";
        noResult.textContent = "No course found!";
        noResult.style.color = "red";
        noResult.style.fontWeight = "bold";
        noResult.style.textAlign = "center";
        noResult.style.marginTop = "20px";
        document.querySelector(".courses").appendChild(noResult);
      }
    } else {
      if (noResult) noResult.remove();
    }
  }

  // Marka la geliyo input
  searchInput.addEventListener("input", () => {
    const value = searchInput.value.toLowerCase().trim();
    // Update URL without reload
    const newURL = window.location.pathname + (value ? `?search=${encodeURIComponent(value)}` : '');
    window.history.pushState({}, '', newURL);
    filterCourses(value);
  });

  // Haddii search param jiro URL-ka, ku shub input-ka
  if (searchParam) {
    searchInput.value = searchParam;
    filterCourses(searchParam);
  }
  </script>
