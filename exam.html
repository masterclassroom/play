<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Ball Game</title>
<style>
  body { font-family: Arial; text-align: center; padding: 20px; background: #f0f0f0; }
  #gameContainer {
    position: relative;
    width: 300px;
    height: 400px;
    margin: 20px auto;
    border: 2px solid #333;
    background: #fff;
    overflow: hidden;
  }
  .ball {
    position: absolute;
    width: 30px;
    height: 30px;
    background: red;
    border-radius: 50%;
    cursor: pointer;
  }
  button, select {
    padding: 8px 15px;
    margin: 5px;
    font-size: 16px;
  }
  #scoreDisplay, #highScoreDisplay, #timerDisplay {
    font-size: 18px;
    margin: 5px;
  }
</style>
</head>
<body>

<h2>Mini Ball Game</h2>
<div>
  Difficulty: 
  <select id="difficultySelect">
    <option value="easy">Easy</option>
    <option value="medium">Medium</option>
    <option value="hard">Hard</option>
  </select>
  <button id="startBtn">Start Game</button>
</div>

<div id="scoreDisplay">Score: 0</div>
<div id="highScoreDisplay">High Score: 0</div>
<div id="timerDisplay">Time Left: 30s</div>

<div id="gameContainer"></div>

<script>
  const gameContainer = document.getElementById('gameContainer');
  const startBtn = document.getElementById('startBtn');
  const difficultySelect = document.getElementById('difficultySelect');
  const scoreDisplay = document.getElementById('scoreDisplay');
  const highScoreDisplay = document.getElementById('highScoreDisplay');
  const timerDisplay = document.getElementById('timerDisplay');

  let score = 0;
  let highScore = localStorage.getItem('ballGameHighScore') || 0;
  let intervalId;
  let timeLeft = 30; // Game time in seconds
  let maxScore = 100;
  let ball;
  
  highScoreDisplay.innerText = `High Score: ${highScore}`;

  function getRandomPosition(max) {
    return Math.floor(Math.random() * max);
  }

  function createBall() {
    if(ball) ball.remove(); // Remove previous ball
    ball = document.createElement('div');
    ball.className = 'ball';
    const maxX = gameContainer.clientWidth - 30;
    const maxY = gameContainer.clientHeight - 30;
    ball.style.left = getRandomPosition(maxX) + 'px';
    ball.style.top = getRandomPosition(maxY) + 'px';
    gameContainer.appendChild(ball);

    ball.addEventListener('click', () => {
      score++;
      scoreDisplay.innerText = `Score: ${score}`;
      if(score > highScore){
        highScore = score;
        highScoreDisplay.innerText = `High Score: ${highScore}`;
        localStorage.setItem('ballGameHighScore', highScore);
      }
      if(score >= maxScore){
        alert('ðŸŽ‰ You win! ðŸŽ‰');
        endGame();
      }
    });
  }

  function startGame() {
    score = 0;
    scoreDisplay.innerText = `Score: ${score}`;
    timeLeft = 30;
    timerDisplay.innerText = `Time Left: ${timeLeft}s`;
    startBtn.disabled = true;
    
    // Difficulty interval
    let difficulty = difficultySelect.value;
    let intervalTime;
    if(difficulty === 'easy') intervalTime = 1000;
    else if(difficulty === 'medium') intervalTime = 500;
    else intervalTime = 300; // hard
    
    createBall();
    intervalId = setInterval(() => {
      createBall();
    }, intervalTime);

    // Timer
    const timerId = setInterval(() => {
      timeLeft--;
      timerDisplay.innerText = `Time Left: ${timeLeft}s`;
      if(timeLeft <= 0){
        clearInterval(intervalId);
        clearInterval(timerId);
        alert('â° Time out! Game over.');
        startBtn.disabled = false;
      }
    }, 1000);
  }

  function endGame(){
    clearInterval(intervalId);
    startBtn.disabled = false;
    if(ball) ball.remove();
  }

  startBtn.addEventListener('click', startGame);
</script>

</body>
</html>
